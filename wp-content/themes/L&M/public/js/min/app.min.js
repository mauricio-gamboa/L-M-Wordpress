"use strict";var myApp=angular.module("LM",["duScroll","checklist-model"]);myApp.directive("owlSingle",[function(){return{restrict:"A",link:function(a,b){b.owlCarousel({autoPlay:!0,singleItem:!0})}}}]),myApp.directive("owlBrands",[function(){return{restrict:"A",link:function(a,b){b.owlCarousel({items:6,autoPlay:!0,pagination:!1})}}}]),myApp.directive("owlServices",[function(){return{restrict:"A",link:function(a,b){b.owlCarousel({autoPlay:!0})}}}]),myApp.directive("selectFile",[function(){return{restrict:"A",link:function(a,b){var c=b.find(".my-btn"),d=b.find('input[type="file"]');c.on("click",function(a){a.preventDefault(),d.trigger("click")})}}}]),myApp.directive("gmap",[function(){return{restrict:"A",link:function(a,b,c){{var d=1*c.lat,e=1*c.lng,f=b[0],g=new google.maps.LatLng(d,e),h={zoom:15,center:g,scrollwheel:!1,scaleControl:!1,streetViewControl:!1,draggable:!0,mapTypeControl:!1,zoomControl:!1,panControl:!1},i=new google.maps.Map(f,h);new google.maps.Marker({position:g,map:i})}}}}]),myApp.directive("addSpan",[function(){return{restrict:"A",link:function(a,b){var c=b.find("li");angular.forEach(c,function(a,b){$(a).addClass("why-"+(b+1)).prepend("<span></span>")})}}}]),myApp.directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]),myApp.factory("submitService",["$http",function(a){return{quote:function(b,c,d,e){var f=new FormData;if(f.append("name",b.name),f.append("email",b.email),f.append("phone",b.phone),f.append("userfile",b.userfile),b.products&&b.products.length){var g="";angular.forEach(b.products,function(a,c){g+=b.products.length==c+1?a:a+", "}),f.append("products",g)}a.post(c+"/process_quote.php",f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(a,b,c,e){d(a,b,c,e)}).error(function(a,b,c,d){e(a,b,c,d)})},contact:function(b,c,d,e){a({method:"POST",url:c+"/process_contact.php",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,b,c,e){d(a,b,c,e)}).error(function(a,b,c,d){e(a,b,c,d)})}}}]),myApp.controller("ContactCtrl",["$scope","$log","submitService",function(a,b,c){a.formData={},a.showSuccess=!1,a.showError=!1,a.submit=function(b){b&&a.root&&c.contact(a.formData,a.root,a.successCallback,a.errorCallback)},a.successCallback=function(b){b.success?(a.showSuccess=!0,a.showError=!1):(a.showSuccess=!1,a.showError=!0),a.formData={},a.contactForm.$setPristine()},a.errorCallback=function(){a.showSuccess=!1,a.showError=!0,a.formData={},a.contactForm.$setPristine()},a.setRoot=function(b){b&&(a.root=b)}}]),myApp.controller("QuoteCtrl",["$scope","$log","submitService",function(a,b,c){a.formData={},a.products=["High efficiency boiler","High efficiency furnace","Gas lines","Air Conditioning","Fireplace","Unit heaters"],a.showSuccess=!1,a.showError=!1,a.submit=function(b){a.showSuccess=!1,a.showError=!1,b&&a.root&&c.quote(a.formData,a.root,a.successCallback,a.errorCallback)},a.successCallback=function(b){b.success?(a.showSuccess=!0,a.showError=!1):(a.showSuccess=!1,a.showError=!0),a.formData={},a.quoteForm.$setPristine()},a.errorCallback=function(){a.showSuccess=!1,a.showError=!0,a.formData={},a.quoteForm.$setPristine()},a.setRoot=function(b){b&&(a.root=b)}}]);